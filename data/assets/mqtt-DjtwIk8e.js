import{d as n,u as e}from"./index-t2RvDO4N.js";import{T as l}from"./Toast-CRSK1xo4.js";const c=({onSubmit:a})=>{const[r,t]=n({broker:"",port:1883,user:"",password:"",topic:""}),d=s=>{s.preventDefault(),a(r)},o=s=>{const i=s.target;t({...r,[i.name]:i.value})};return e("form",{onSubmit:d,className:"space-y-6",children:[e("div",{children:[e("label",{htmlFor:"broker",className:"block text-sm font-medium text-gray-700",children:"Broker Mqtt"}),e("div",{className:"mt-1",children:e("input",{id:"broker",name:"broker",type:"text",required:!0,value:r.broker,onChange:o,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg px-4 py-3"})})]}),e("div",{children:[e("label",{htmlFor:"broker",className:"block font-medium text-gray-700",children:"Mqtt port"}),e("div",{className:"mt-1",children:e("input",{id:"port",name:"port",type:"number",required:!0,value:r.port,onChange:o,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg px-4 py-3"})})]}),e("div",{children:[e("label",{htmlFor:"user",className:"block font-medium text-gray-700",children:"User"}),e("div",{className:"mt-1",children:e("input",{id:"user",name:"user",type:"text",required:!0,value:r.user,onChange:o,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg px-4 py-3"})})]}),e("div",{children:[e("label",{htmlFor:"password",className:"block font-medium text-gray-700",children:"Password"}),e("div",{className:"mt-1",children:e("input",{id:"password",name:"password",type:"password",required:!0,value:r.password,onChange:o,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg px-4 py-3"})})]}),e("div",{children:[e("label",{htmlFor:"topic",className:"block font-medium text-gray-700",children:"Mqtt Topic"}),e("div",{className:"mt-1",children:e("input",{id:"topic",name:"topic",type:"text",required:!0,value:r.topic,onChange:o,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg px-4 py-3"})})]}),e("div",{children:e("button",{type:"submit",className:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",children:"Enregistrer"})})]})};function p(a){const[r,t]=n(null),d=async o=>{console.log("Form submitted:",o);try{const s=await fetch("/saveMqttSettings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!s.ok)throw new Error("Erreur lors de la soumission des données MQTT");const i=await s.json();console.log("Réponse du serveur:",i),t({message:"Paramètres MQTT enregistrés avec succès !",type:"success"})}catch(s){console.error("Erreur:",s),t({message:"Erreur lors de l’enregistrement des paramètres MQTT.",type:"error"})}};return e("div",{className:"container p-8",children:[r&&e(l,{message:r.message,type:r.type,onClose:()=>t(null)}),e("div",{className:"divide-y divide-gray-200 overflow-hidden rounded-lg bg-white shadow",children:[e("div",{className:"px-4 py-5 sm:px-6 bg-indigo-600",children:e("h1",{className:"text-xl font-semibold text-white",children:"Paramètres Mqtt"})}),e("div",{className:"px-4 py-5 sm:p-6 bg-gray-100",children:e(c,{onSubmit:d})})]})]})}export{p as default};
