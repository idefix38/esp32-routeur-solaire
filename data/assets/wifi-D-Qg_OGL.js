import{d as c,y as m,u as e,a as u}from"./index-y5u9UKsL.js";import{L as p}from"./loader-jG5UIMEw.js";import{u as f}from"./useEsp32Api-_9kM6RSB.js";const g=({onSubmit:l,loading:r=!1,initialValues:i})=>{const[t,o]=c({ssid:"",password:""});m(()=>{i&&o(i)},[i]);const d=async s=>{s.preventDefault(),await l(t)},n=s=>{const a=s.target;o({...t,[a.name]:a.value})};return e("form",{onSubmit:d,className:"space-y-6",children:[e("div",{children:[e("label",{htmlFor:"ssid",className:"block  font-medium text-gray-700",children:"Nom du reseau / SSID"}),e("div",{className:"mt-1",children:e("input",{id:"ssid",name:"ssid",type:"text",required:!0,value:t.ssid,onChange:n,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg px-4 py-3"})})]}),e("div",{children:[e("label",{htmlFor:"password",className:"block font-medium text-gray-700",children:"Mot de passe"}),e("div",{className:"mt-1",children:e("input",{id:"password",name:"password",type:"password",required:!0,value:t.password,onChange:n,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg px-4 py-3"})})]}),e("div",{children:e("button",{type:"submit",className:"flex w-full justify-center items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",disabled:r,children:[r&&e(p,{className:"mr-2 h-5 w-5 animate-spin text-white"}),"Enregistrer"]})})]})};function y(l){const{setToast:r}=u(),{callApi:i,loading:t}=f(),[o,d]=c(null);return m(()=>{(async()=>{var a;const s=await i("/getConfig");s.success&&((a=s.data)!=null&&a.wifi)&&d({ssid:s.data.wifi.ssid||"",password:s.data.wifi.password||""})})()},[]),e("div",{className:"container p-8",children:e("div",{className:"divide-y divide-gray-200 overflow-hidden rounded-lg bg-white shadow",children:[e("div",{className:"px-4 py-5 sm:px-6 bg-indigo-600",children:e("h1",{className:"text-xl font-semibold text-white",children:"Paramètres WiFi"})}),e("div",{className:"px-4 py-5 sm:p-6 bg-gray-100",children:e(g,{onSubmit:async s=>{(await i("/saveWifiSettings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).success?r({message:"Paramètres WiFi enregistrés avec succès",type:"success"}):r({message:"Erreur lors de l'enregistrement des paramètres WiFi",type:"error"})},loading:t,initialValues:o})})]})})}export{y as default};
